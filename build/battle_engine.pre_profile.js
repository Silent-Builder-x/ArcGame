function weight(x){ return 2097152 * x.network_depth + 256 * x.total_gates + 256 * x.network_size + x.preprocess_weight;}var pre_profile = { 'code':
{"source_file":"use arcis::*;\n\n#[encrypted]\nmod battle_engine {\n    use arcis::*;\n\n    pub struct PlayerMove {\n        pub action_type: u64, // 1=Attack(攻), 2=Defend(防), 3=Break(破)\n        pub power: u64,       // 力量值\n    }\n\n    pub struct BattleResult {\n        pub winner: u64,      // 1=P1胜, 2=P2胜, 0=平局\n        pub damage: u64,      // 造成的伤害值\n    }\n\n    #[instruction]\n    pub fn resolve_duel(\n        move_a_ctxt: Enc<Shared, PlayerMove>,\n        move_b_ctxt: Enc<Shared, PlayerMove>\n    ) -> Enc<Shared, BattleResult> {\n        let a = move_a_ctxt.to_arcis();\n        let b = move_b_ctxt.to_arcis();\n\n        // --- 核心博弈逻辑 (Rock-Paper-Scissors 变体) ---\n        // 1(攻) > 3(破)\n        // 3(破) > 2(防)\n        // 2(防) > 1(攻)\n\n        // 判定 A 是否因属性克制获胜\n        let a_type_wins = \n            (a.action_type == 1 && b.action_type == 3) ||\n            (a.action_type == 3 && b.action_type == 2) ||\n            (a.action_type == 2 && b.action_type == 1);\n\n        // 判定 B 是否因属性克制获胜\n        let b_type_wins = \n            (b.action_type == 1 && a.action_type == 3) ||\n            (b.action_type == 3 && a.action_type == 2) ||\n            (b.action_type == 2 && a.action_type == 1);\n\n        // 判定是否同属性\n        let same_type = a.action_type == b.action_type;\n\n        // 同属性时比较力量值\n        let a_power_wins = a.power > b.power;\n        let b_power_wins = b.power > a.power;\n\n        // --- 最终胜负 Mux ---\n        let (winner, raw_dmg) = if a_type_wins {\n            (1u64, a.power) // 克制直接造成全额伤害\n        } else {\n            if b_type_wins {\n                (2u64, b.power)\n            } else {\n                // 同属性，拼点数\n                if same_type {\n                    if a_power_wins {\n                        (1u64, a.power - b.power) // 拼刀，伤害抵消\n                    } else {\n                        if b_power_wins {\n                            (2u64, b.power - a.power)\n                        } else {\n                            (0u64, 0u64) // 完全平局\n                        }\n                    }\n                } else {\n                    (0u64, 0u64) // 理论不可达，但也设为平局\n                }\n            }\n        };\n\n        let result = BattleResult {\n            winner,\n            damage: raw_dmg,\n        };\n\n        // 结果加密返回给 Solana 上的游戏裁判程序\n        move_a_ctxt.owner.from_arcis(result)\n    }\n}","code":[{"code":"self.owner","region":"Unknown"},{"code":"self.data","region":"Unknown"},{"code":"Self :: __arcis_inner(self.owner, self.data)","region":"Unknown"},{"code":"let a = move_a_ctxt.to_arcis();","region":{"Known":[{"line":21,"column":8},{"line":21,"column":39}]}},{"code":"let b = move_b_ctxt.to_arcis();","region":{"Known":[{"line":22,"column":8},{"line":22,"column":39}]}},{"code":"a.action_type == 1 && b.action_type == 3","region":{"Known":[{"line":31,"column":13},{"line":31,"column":53}]}},{"code":"a.action_type == 3 && b.action_type == 2","region":{"Known":[{"line":32,"column":13},{"line":32,"column":53}]}},{"code":"a.action_type == 2 && b.action_type == 1","region":{"Known":[{"line":33,"column":13},{"line":33,"column":53}]}},{"code":"let a_type_wins = (a.action_type == 1 && b.action_type == 3) ||\n(a.action_type == 3 && b.action_type == 2) ||\n(a.action_type == 2 && b.action_type == 1);","region":{"Known":[{"line":30,"column":8},{"line":33,"column":55}]}},{"code":"b.action_type == 1 && a.action_type == 3","region":{"Known":[{"line":37,"column":13},{"line":37,"column":53}]}},{"code":"b.action_type == 3 && a.action_type == 2","region":{"Known":[{"line":38,"column":13},{"line":38,"column":53}]}},{"code":"b.action_type == 2 && a.action_type == 1","region":{"Known":[{"line":39,"column":13},{"line":39,"column":53}]}},{"code":"let b_type_wins = (b.action_type == 1 && a.action_type == 3) ||\n(b.action_type == 3 && a.action_type == 2) ||\n(b.action_type == 2 && a.action_type == 1);","region":{"Known":[{"line":36,"column":8},{"line":39,"column":55}]}},{"code":"let same_type = a.action_type == b.action_type;","region":{"Known":[{"line":42,"column":8},{"line":42,"column":55}]}},{"code":"let a_power_wins = a.power > b.power;","region":{"Known":[{"line":45,"column":8},{"line":45,"column":45}]}},{"code":"let b_power_wins = b.power > a.power;","region":{"Known":[{"line":46,"column":8},{"line":46,"column":45}]}},{"code":"a_type_wins","region":{"Known":[{"line":49,"column":35},{"line":49,"column":46}]}},{"code":"b_type_wins","region":{"Known":[{"line":52,"column":15},{"line":52,"column":26}]}},{"code":"same_type","region":{"Known":[{"line":56,"column":19},{"line":56,"column":28}]}},{"code":"0u64","region":{"Known":[{"line":67,"column":21},{"line":67,"column":25}]}},{"code":"0u64","region":{"Known":[{"line":67,"column":27},{"line":67,"column":31}]}},{"code":"(0u64, 0u64)","region":{"Known":[{"line":67,"column":20},{"line":67,"column":32}]}},{"code":"a_power_wins","region":{"Known":[{"line":57,"column":23},{"line":57,"column":35}]}},{"code":"b_power_wins","region":{"Known":[{"line":60,"column":27},{"line":60,"column":39}]}},{"code":"0u64","region":{"Known":[{"line":63,"column":29},{"line":63,"column":33}]}},{"code":"0u64","region":{"Known":[{"line":63,"column":35},{"line":63,"column":39}]}},{"code":"(0u64, 0u64)","region":{"Known":[{"line":63,"column":28},{"line":63,"column":40}]}},{"code":"2u64","region":{"Known":[{"line":61,"column":29},{"line":61,"column":33}]}},{"code":"b.power - a.power","region":{"Known":[{"line":61,"column":35},{"line":61,"column":52}]}},{"code":"(2u64, b.power - a.power)","region":{"Known":[{"line":61,"column":28},{"line":61,"column":53}]}},{"code":"if b_power_wins { (2u64, b.power - a.power) } else { (0u64, 0u64) }","region":{"Known":[{"line":60,"column":24},{"line":64,"column":25}]}},{"code":"1u64","region":{"Known":[{"line":58,"column":25},{"line":58,"column":29}]}},{"code":"a.power - b.power","region":{"Known":[{"line":58,"column":31},{"line":58,"column":48}]}},{"code":"(1u64, a.power - b.power)","region":{"Known":[{"line":58,"column":24},{"line":58,"column":49}]}},{"code":"if a_power_wins { (1u64, a.power - b.power) } else\n{ if b_power_wins { (2u64, b.power - a.power) } else { (0u64, 0u64) } }","region":{"Known":[{"line":57,"column":20},{"line":65,"column":21}]}},{"code":"if same_type\n{\n    if a_power_wins { (1u64, a.power - b.power) } else\n    { if b_power_wins { (2u64, b.power - a.power) } else { (0u64, 0u64) } }\n} else { (0u64, 0u64) }","region":{"Known":[{"line":56,"column":16},{"line":68,"column":17}]}},{"code":"2u64","region":{"Known":[{"line":53,"column":17},{"line":53,"column":21}]}},{"code":"b.power","region":{"Known":[{"line":53,"column":23},{"line":53,"column":30}]}},{"code":"(2u64, b.power)","region":{"Known":[{"line":53,"column":16},{"line":53,"column":31}]}},{"code":"if b_type_wins { (2u64, b.power) } else\n{\n    if same_type\n    {\n        if a_power_wins { (1u64, a.power - b.power) } else\n        {\n            if b_power_wins { (2u64, b.power - a.power) } else\n            { (0u64, 0u64) }\n        }\n    } else { (0u64, 0u64) }\n}","region":{"Known":[{"line":52,"column":12},{"line":69,"column":13}]}},{"code":"1u64","region":{"Known":[{"line":50,"column":13},{"line":50,"column":17}]}},{"code":"a.power","region":{"Known":[{"line":50,"column":19},{"line":50,"column":26}]}},{"code":"(1u64, a.power)","region":{"Known":[{"line":50,"column":12},{"line":50,"column":27}]}},{"code":"let (winner, raw_dmg) = if a_type_wins { (1u64, a.power) } else\n{\n    if b_type_wins { (2u64, b.power) } else\n    {\n        if same_type\n        {\n            if a_power_wins { (1u64, a.power - b.power) } else\n            {\n                if b_power_wins { (2u64, b.power - a.power) } else\n                { (0u64, 0u64) }\n            }\n        } else { (0u64, 0u64) }\n    }\n};","region":{"Known":[{"line":49,"column":8},{"line":70,"column":10}]}},{"code":"winner","region":{"Known":[{"line":73,"column":12},{"line":73,"column":18}]}},{"code":"raw_dmg","region":{"Known":[{"line":74,"column":20},{"line":74,"column":27}]}},{"code":"let result = BattleResult { winner, damage : raw_dmg, };","region":{"Known":[{"line":72,"column":8},{"line":75,"column":10}]}},{"code":"result","region":{"Known":[{"line":78,"column":37},{"line":78,"column":43}]}},{"code":"1","region":"Unknown"},{"code":"fn inner < T > (a : T, b : T) -> T { ((a + b) as ArcisField) as T }","region":"Unknown"},{"code":"self","region":"Unknown"},{"code":"other","region":"Unknown"},{"code":"a + b","region":"Unknown"},{"code":"(a + b) as ArcisField","region":"Unknown"},{"code":"((a + b) as ArcisField) as T","region":"Unknown"},{"code":"inner(self, other)","region":"Unknown"},{"code":"self.nonce = self.nonce.wrapping_add(1);","region":"Unknown"},{"code":"self","region":"Unknown"},{"code":"a","region":"Unknown"},{"code":"a","region":"Unknown"},{"code":"self.from_arcis_inner(a)","region":"Unknown"},{"code":"a","region":"Unknown"},{"code":"let phantom = [a; 0];","region":"Unknown"},{"code":"data","region":"Unknown"},{"code":"phantom","region":"Unknown"},{"code":"let data = EncData { data, phantom };","region":"Unknown"},{"code":"owner","region":"Unknown"},{"code":"data","region":"Unknown"},{"code":"Self { owner, data }","region":"Unknown"},{"code":"Enc :: new_inner(self, a, self.from_arcis_inner(a))","region":"Unknown"},{"code":"move_a_ctxt.owner.from_arcis(result)","region":{"Known":[{"line":78,"column":8},{"line":78,"column":44}]}}]}
, 'instructions':
{"resolve_duel":{"profilees":[{"code_idx":0,"before_size_id":0,"after_size_id":0},{"code_idx":1,"before_size_id":0,"after_size_id":1},{"code_idx":2,"before_size_id":0,"after_size_id":2},{"code_idx":3,"before_size_id":0,"after_size_id":2},{"code_idx":0,"before_size_id":2,"after_size_id":2},{"code_idx":1,"before_size_id":2,"after_size_id":2},{"code_idx":2,"before_size_id":2,"after_size_id":3},{"code_idx":4,"before_size_id":2,"after_size_id":3},{"code_idx":5,"before_size_id":3,"after_size_id":4},{"code_idx":6,"before_size_id":5,"after_size_id":6},{"code_idx":7,"before_size_id":7,"after_size_id":8},{"code_idx":8,"before_size_id":3,"after_size_id":9},{"code_idx":9,"before_size_id":9,"after_size_id":9},{"code_idx":10,"before_size_id":10,"after_size_id":10},{"code_idx":11,"before_size_id":11,"after_size_id":11},{"code_idx":12,"before_size_id":9,"after_size_id":12},{"code_idx":13,"before_size_id":12,"after_size_id":13},{"code_idx":14,"before_size_id":13,"after_size_id":14},{"code_idx":15,"before_size_id":14,"after_size_id":15},{"code_idx":16,"before_size_id":15,"after_size_id":15},{"code_idx":17,"before_size_id":15,"after_size_id":15},{"code_idx":18,"before_size_id":15,"after_size_id":15},{"code_idx":19,"before_size_id":15,"after_size_id":15},{"code_idx":20,"before_size_id":15,"after_size_id":15},{"code_idx":21,"before_size_id":15,"after_size_id":15},{"code_idx":22,"before_size_id":15,"after_size_id":15},{"code_idx":23,"before_size_id":15,"after_size_id":15},{"code_idx":24,"before_size_id":15,"after_size_id":15},{"code_idx":25,"before_size_id":15,"after_size_id":15},{"code_idx":26,"before_size_id":15,"after_size_id":15},{"code_idx":27,"before_size_id":15,"after_size_id":15},{"code_idx":28,"before_size_id":15,"after_size_id":16},{"code_idx":29,"before_size_id":15,"after_size_id":16},{"code_idx":30,"before_size_id":15,"after_size_id":17},{"code_idx":31,"before_size_id":17,"after_size_id":17},{"code_idx":32,"before_size_id":17,"after_size_id":18},{"code_idx":33,"before_size_id":17,"after_size_id":18},{"code_idx":34,"before_size_id":15,"after_size_id":19},{"code_idx":35,"before_size_id":15,"after_size_id":20},{"code_idx":36,"before_size_id":20,"after_size_id":20},{"code_idx":37,"before_size_id":20,"after_size_id":20},{"code_idx":38,"before_size_id":20,"after_size_id":20},{"code_idx":39,"before_size_id":15,"after_size_id":21},{"code_idx":40,"before_size_id":21,"after_size_id":21},{"code_idx":41,"before_size_id":21,"after_size_id":21},{"code_idx":42,"before_size_id":21,"after_size_id":21},{"code_idx":43,"before_size_id":15,"after_size_id":22},{"code_idx":44,"before_size_id":22,"after_size_id":22},{"code_idx":45,"before_size_id":22,"after_size_id":22},{"code_idx":46,"before_size_id":22,"after_size_id":22},{"code_idx":47,"before_size_id":22,"after_size_id":22},{"code_idx":48,"before_size_id":22,"after_size_id":22},{"code_idx":49,"before_size_id":22,"after_size_id":22},{"code_idx":50,"before_size_id":22,"after_size_id":22},{"code_idx":51,"before_size_id":22,"after_size_id":22},{"code_idx":52,"before_size_id":22,"after_size_id":23},{"code_idx":53,"before_size_id":22,"after_size_id":23},{"code_idx":54,"before_size_id":22,"after_size_id":24},{"code_idx":55,"before_size_id":22,"after_size_id":24},{"code_idx":56,"before_size_id":22,"after_size_id":24},{"code_idx":57,"before_size_id":24,"after_size_id":24},{"code_idx":58,"before_size_id":24,"after_size_id":24},{"code_idx":59,"before_size_id":24,"after_size_id":24},{"code_idx":60,"before_size_id":24,"after_size_id":25},{"code_idx":61,"before_size_id":25,"after_size_id":25},{"code_idx":62,"before_size_id":25,"after_size_id":25},{"code_idx":63,"before_size_id":25,"after_size_id":25},{"code_idx":64,"before_size_id":25,"after_size_id":25},{"code_idx":65,"before_size_id":25,"after_size_id":25},{"code_idx":66,"before_size_id":25,"after_size_id":25},{"code_idx":67,"before_size_id":25,"after_size_id":25},{"code_idx":68,"before_size_id":25,"after_size_id":25},{"code_idx":69,"before_size_id":24,"after_size_id":25},{"code_idx":70,"before_size_id":22,"after_size_id":25}]}}
, 'instruction_locations':
{"resolve_duel":{"Known":[{"line":16,"column":4},{"line":16,"column":18}]}}
};
